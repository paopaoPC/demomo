window.BMAP_AUTHENTIC_KEY="hV7HLeVocogY084C1a65RUGK";(function(){var bz,aT=bz=aT||{version:"1.3.4"};aT.guid="$BAIDU$";window[aT.guid]=window[aT.guid]||{};aT.object=aT.object||{};aT.extend=aT.object.extend=function(cf,T){for(var ce in T){if(T.hasOwnProperty(ce)){cf[ce]=T[ce]}}return cf};aT.dom=aT.dom||{};aT.dom.g=function(T){if("string"==typeof T||T instanceof String){return document.getElementById(T)}else{if(T&&T.nodeName&&(T.nodeType==1||T.nodeType==9)){return T}}return null};aT.g=aT.G=aT.dom.g;aT.dom.hide=function(T){T=aT.dom.g(T);T.style.display="none";return T};aT.hide=aT.dom.hide;aT.lang=aT.lang||{};aT.lang.isString=function(T){return"[object String]"==Object.prototype.toString.call(T)};aT.isString=aT.lang.isString;aT.dom._g=function(T){if(aT.lang.isString(T)){return document.getElementById(T)}return T};aT._g=aT.dom._g;aT.dom.contains=function(T,ce){var cf=aT.dom._g;T=cf(T);ce=cf(ce);return T.contains?T!=ce&&T.contains(ce):!!(T.compareDocumentPosition(ce)&16)};aT.browser=aT.browser||{};aT.dom._NAME_ATTRS=(function(){var T={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"};T.htmlFor="for";T.className="class";return T})();aT.dom.setAttr=function(ce,T,cf){ce=aT.dom.g(ce);if("style"==T){ce.style.cssText=cf}else{T=aT.dom._NAME_ATTRS[T]||T;ce.setAttribute(T,cf)}return ce};aT.setAttr=aT.dom.setAttr;aT.dom.setAttrs=function(cf,T){cf=aT.dom.g(cf);for(var ce in T){aT.dom.setAttr(cf,ce,T[ce])}return cf};aT.setAttrs=aT.dom.setAttrs;aT.string=aT.string||{};aT.dom.removeClass=function(ci,cj){ci=aT.dom.g(ci);var cg=ci.className.split(/\s+/),ck=cj.split(/\s+/),ce,T=ck.length,cf,ch=0;for(;ch<T;++ch){for(cf=0,ce=cg.length;cf<ce;++cf){if(cg[cf]==ck[ch]){cg.splice(cf,1);break}}}ci.className=cg.join(" ");return ci};aT.removeClass=aT.dom.removeClass;aT.dom.insertHTML=function(cg,T,cf){cg=aT.dom.g(cg);var ce,ch;if(cg.insertAdjacentHTML){cg.insertAdjacentHTML(T,cf)}else{ce=cg.ownerDocument.createRange();T=T.toUpperCase();if(T=="AFTERBEGIN"||T=="BEFOREEND"){ce.selectNodeContents(cg);ce.collapse(T=="AFTERBEGIN")}else{ch=T=="BEFOREBEGIN";ce[ch?"setStartBefore":"setEndAfter"](cg);ce.collapse(ch)}ce.insertNode(ce.createContextualFragment(cf))}return cg};aT.insertHTML=aT.dom.insertHTML;aT.dom.show=function(T){T=aT.dom.g(T);T.style.display="";return T};aT.show=aT.dom.show;aT.dom.getDocument=function(T){T=aT.dom.g(T);return T.nodeType==9?T:T.ownerDocument||T.document};aT.dom.addClass=function(ci,cj){ci=aT.dom.g(ci);var ce=cj.split(/\s+/),T=ci.className,ch=" "+T+" ",cg=0,cf=ce.length;for(;cg<cf;cg++){if(ch.indexOf(" "+ce[cg]+" ")<0){T+=" "+ce[cg]}}ci.className=T;return ci};aT.addClass=aT.dom.addClass;aT.dom._styleFixer=aT.dom._styleFixer||{};aT.dom._styleFilter=aT.dom._styleFilter||[];aT.dom._styleFilter.filter=function(ce,ch,ci){for(var T=0,cg=aT.dom._styleFilter,cf;cf=cg[T];T++){if(cf=cf[ci]){ch=cf(ce,ch)}}return ch};aT.string.toCamelCase=function(T){if(T.indexOf("-")<0&&T.indexOf("_")<0){return T}return T.replace(/[-_][^-_]/g,function(ce){return ce.charAt(1).toUpperCase()})};aT.dom.getStyle=function(cf,ce){var ci=aT.dom;cf=ci.g(cf);ce=aT.string.toCamelCase(ce);var ch=cf.style[ce];if(!ch){var T=ci._styleFixer[ce],cg=cf.currentStyle||getComputedStyle(cf,null);ch=T&&T.get?T.get(cf,cg):cg[T||ce]}if(T=ci._styleFilter){ch=T.filter(ce,ch,"get")}return ch};aT.getStyle=aT.dom.getStyle;if(/opera\/(\d+\.\d)/i.test(navigator.userAgent)){aT.browser.opera=+RegExp["\x241"]}aT.browser.isWebkit=/webkit/i.test(navigator.userAgent);aT.browser.isGecko=/gecko/i.test(navigator.userAgent)&&!/like gecko/i.test(navigator.userAgent);aT.browser.isStrict=document.compatMode=="CSS1Compat";aT.dom.getPosition=function(T){T=aT.dom.g(T);var cm=aT.dom.getDocument(T),cg=aT.browser,cj=aT.dom.getStyle,cf=cg.isGecko>0&&cm.getBoxObjectFor&&cj(T,"position")=="absolute"&&(T.style.top===""||T.style.left===""),ck={left:0,top:0},ci=(cg.ie&&!cg.isStrict)?cm.body:cm.documentElement,cn,ce;if(T==ci){return ck}if(T.getBoundingClientRect){ce=T.getBoundingClientRect();ck.left=Math.floor(ce.left)+Math.max(cm.documentElement.scrollLeft,cm.body.scrollLeft);ck.top=Math.floor(ce.top)+Math.max(cm.documentElement.scrollTop,cm.body.scrollTop);ck.left-=cm.documentElement.clientLeft;ck.top-=cm.documentElement.clientTop;var cl=cm.body,co=parseInt(cj(cl,"borderLeftWidth")),ch=parseInt(cj(cl,"borderTopWidth"));if(cg.ie&&!cg.isStrict){ck.left-=isNaN(co)?2:co;ck.top-=isNaN(ch)?2:ch}}else{cn=T;do{ck.left+=cn.offsetLeft;ck.top+=cn.offsetTop;if(cg.isWebkit>0&&cj(cn,"position")=="fixed"){ck.left+=cm.body.scrollLeft;ck.top+=cm.body.scrollTop;break}cn=cn.offsetParent}while(cn&&cn!=T);if(cg.opera>0||(cg.isWebkit>0&&cj(T,"position")=="absolute")){ck.top-=cm.body.offsetTop}cn=T.offsetParent;while(cn&&cn!=cm.body){ck.left-=cn.scrollLeft;if(!cg.opera||cn.tagName!="TR"){ck.top-=cn.scrollTop}cn=cn.offsetParent}}return ck};if(/firefox\/(\d+\.\d)/i.test(navigator.userAgent)){aT.browser.firefox=+RegExp["\x241"]}(function(){var T=navigator.userAgent;if(/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(T)&&!/chrome/i.test(T)){aT.browser.safari=+(RegExp["\x241"]||RegExp["\x242"])}})();if(/chrome\/(\d+\.\d)/i.test(navigator.userAgent)){aT.browser.chrome=+RegExp["\x241"]}aT.array=aT.array||{};aT.array.each=function(ci,cg){var cf,ch,ce,T=ci.length;if("function"==typeof cg){for(ce=0;ce<T;ce++){ch=ci[ce];cf=cg.call(ci,ch,ce);if(cf===false){break}}}return ci};aT.each=aT.array.each;aT.lang.guid=function(){return"TANGRAM__"+(window[aT.guid]._counter++).toString(36)};window[aT.guid]._counter=window[aT.guid]._counter||1;window[aT.guid]._instances=window[aT.guid]._instances||{};aT.lang.isFunction=function(T){return"[object Function]"==Object.prototype.toString.call(T)};aT.lang.Class=function(T){this.guid=T||aT.lang.guid();window[aT.guid]._instances[this.guid]=this};window[aT.guid]._instances=window[aT.guid]._instances||{};aT.lang.Class.prototype.dispose=function(){delete window[aT.guid]._instances[this.guid];for(var T in this){if(!aT.lang.isFunction(this[T])){delete this[T]}}this.disposed=true};aT.lang.Class.prototype.toString=function(){return"[object "+(this._className||"Object")+"]"};aT.lang.Event=function(T,ce){this.type=T;this.returnValue=true;this.target=ce||null;this.currentTarget=null};aT.lang.Class.prototype.addEventListener=function(cg,cf,ce){if(!aT.lang.isFunction(cf)){return}!this.__listeners&&(this.__listeners={});var T=this.__listeners,ch;if(typeof ce=="string"&&ce){if(/[^\w\-]/.test(ce)){throw ("nonstandard key:"+ce)}else{cf.hashCode=ce;ch=ce}}cg.indexOf("on")!=0&&(cg="on"+cg);typeof T[cg]!="object"&&(T[cg]={});ch=ch||aT.lang.guid();cf.hashCode=ch;T[cg][ch]=cf};aT.lang.Class.prototype.removeEventListener=function(cf,ce){if(aT.lang.isFunction(ce)){ce=ce.hashCode}else{if(!aT.lang.isString(ce)){return}}!this.__listeners&&(this.__listeners={});cf.indexOf("on")!=0&&(cf="on"+cf);var T=this.__listeners;if(!T[cf]){return}T[cf][ce]&&delete T[cf][ce]};aT.lang.Class.prototype.dispatchEvent=function(cg,T){if(aT.lang.isString(cg)){cg=new aT.lang.Event(cg)}!this.__listeners&&(this.__listeners={});T=T||{};for(var cf in T){cg[cf]=T[cf]}var cf,ce=this.__listeners,ch=cg.type;cg.target=cg.target||this;cg.currentTarget=this;ch.indexOf("on")!=0&&(ch="on"+ch);aT.lang.isFunction(this[ch])&&this[ch].apply(this,arguments);if(typeof ce[ch]=="object"){for(cf in ce[ch]){ce[ch][cf].apply(this,arguments)}}return cg.returnValue};aT.lang.inherits=function(cj,ch,cg){var cf,ci,T=cj.prototype,ce=new Function();ce.prototype=ch.prototype;ci=cj.prototype=new ce();for(cf in T){ci[cf]=T[cf]}cj.prototype.constructor=cj;cj.superClass=ch.prototype;if("string"==typeof cg){ci._className=cg}};aT.inherits=aT.lang.inherits;aT.lang.instance=function(T){return window[aT.guid]._instances[T]||null};aT.platform=aT.platform||{};aT.platform.isAndroid=/android/i.test(navigator.userAgent);if(/android (\d+\.\d)/i.test(navigator.userAgent)){aT.platform.android=aT.android=RegExp["\x241"]}aT.platform.isIpad=/ipad/i.test(navigator.userAgent);aT.platform.isIphone=/iphone/i.test(navigator.userAgent);aT.platform.iosVersion=/iphone os (\d)\_/i.test(navigator.userAgent)?+RegExp["\x241"]:0;aT.lang.Event.prototype.inherit=function(cf){var ce=this;this.domEvent=cf=window.event||cf;ce.clientX=cf.clientX||cf.pageX;ce.clientY=cf.clientY||cf.pageY;ce.offsetX=cf.offsetX||cf.layerX;ce.offsetY=cf.offsetY||cf.layerY;ce.screenX=cf.screenX;ce.screenY=cf.screenY;ce.ctrlKey=cf.ctrlKey||cf.metaKey;ce.shiftKey=cf.shiftKey;ce.altKey=cf.altKey;if(cf.touches){ce.touches=[];for(var T=0;T<cf.touches.length;T++){ce.touches.push({clientX:cf.touches[T].clientX,clientY:cf.touches[T].clientY,screenX:cf.touches[T].screenX,screenY:cf.touches[T].screenY,pageX:cf.touches[T].pageX,pageY:cf.touches[T].pageY,target:cf.touches[T].target,identifier:cf.touches[T].identifier})}}if(cf.changedTouches){ce.changedTouches=[];for(var T=0;T<cf.changedTouches.length;T++){ce.changedTouches.push({clientX:cf.changedTouches[T].clientX,clientY:cf.changedTouches[T].clientY,screenX:cf.changedTouches[T].screenX,screenY:cf.changedTouches[T].screenY,pageX:cf.changedTouches[T].pageX,pageY:cf.changedTouches[T].pageY,target:cf.changedTouches[T].target,identifier:cf.changedTouches[T].identifier})}}if(cf.targetTouches){ce.targetTouches=[];for(var T=0;T<cf.targetTouches.length;T++){ce.targetTouches.push({clientX:cf.targetTouches[T].clientX,clientY:cf.targetTouches[T].clientY,screenX:cf.targetTouches[T].screenX,screenY:cf.targetTouches[T].screenY,pageX:cf.targetTouches[T].pageX,pageY:cf.targetTouches[T].pageY,target:cf.targetTouches[T].target,identifier:cf.targetTouches[T].identifier})}}ce.rotation=cf.rotation;ce.scale=cf.scale;return ce};aT.lang.decontrol=function(ce){var T=window[aT.guid];T._instances&&(delete T._instances[ce])};aT.event={};aT.on=aT.event.on=function(cf,ce,T){if(!(cf=aT.g(cf))){return cf}ce=ce.replace(/^on/,"");if(cf.addEventListener){cf.addEventListener(ce,T,false)}else{if(cf.attachEvent){cf.attachEvent("on"+ce,T)}}return cf};aT.un=aT.event.un=function(cf,ce,T){if(!(cf=aT.g(cf))){return cf}ce=ce.replace(/^on/,"");if(cf.removeEventListener){cf.removeEventListener(ce,T,false)}else{if(cf.detachEvent){cf.detachEvent("on"+ce,T)}}return cf};aT.dom.hasClass=function(cf,ce){if(!cf||!cf.className||typeof cf.className!="string"){return false}var T=-1;try{T=cf.className==ce||cf.className.indexOf(ce)}catch(cg){return false}return T>-1};window.BMap=window.BMap||{};window.BMap.version="1.0";window.BMap._register=[];window.BMap.register=function(T){this._register.push(T)};var bm=window.BMAP_AUTHENTIC_KEY;BMap.apiLoad=BMap.apiLoad||function(){};var ay={};ay.startLoadScript=window.BMap_loadScriptTime;var a3=null;function bc(ch,cj){ch=aT.g(ch);if(!ch){return}var ci=this;aT.lang.Class.call(ci);ci.config={clickInterval:200,enableDragging:true,enableDblclickZoom:true,enableMouseDown:true,enablePinchToZoom:true,enableAutoResize:true,fps:25,zoomerDuration:240,actionDuration:450,minZoom:3,maxZoom:18,enableMapClick:true,mapType:new bZ("\u5730\u56fe",aJ,{tips:"\u663e\u793a\u666e\u901a\u5730\u56fe",mapInstance:this}),enableInertialDragging:true,drawMargin:100,enableHighResolution:true,devicePixelRatio:window.devicePixelRatio||2,vectorMapLevel:3,beautifyBlackList:[]};aT.extend(ci.config,cj||{});var T=ci.config.beautifyBlackList;if(an()){for(var cg=0,ce=T.length;cg<ce;cg++){if(aT.browser[T[cg]]){ci.config.devicePixelRatio=1;break}}}ci.container=ch;ci._setStyle(ch);ch.unselectable="on";ch.innerHTML="";ch.appendChild(ci.render());var cf=ci.getSize();ci.width=cf.width;ci.height=cf.height;ci.offsetX=0;ci.offsetY=0;ci.platform=ch.firstChild;ci.maskLayer=ci.platform.firstChild;ci.maskLayer.style.width=ci.width+"px";ci.maskLayer.style.height=ci.height+"px";ci._panes={};ci.centerPoint=new bK(0,0);ci.mercatorCenter=new bK(0,0);ci.zoomLevel=1;ci.lastLevel=0;ci.defaultZoomLevel=null;ci.defaultCenter=null;ci.currentCity="";ci.cityCode="";ci.currentOperation=0;cj=cj||{};var ck=ci.mapType=ci.config.mapType;ci.projection=ck.getProjection();ci.temp={operating:false,arrow:0,lastDomMoveTime:0,lastLoadTileTime:0,lastMovingTime:0,canKeyboard:false,registerIndex:-1,curSpots:[]};for(var cg=0;cg<BMap._register.length;cg++){BMap._register[cg](ci)}ci.temp.registerIndex=cg;ci._bind();b3.load("map",function(){ci._draw()});b3.load("opmb",function(){ci._asyncRegister()});ch=null;ci.enableLoadTiles=true;ci._viewTiles=[]}aT.lang.inherits(bc,aT.lang.Class,"Map");aT.extend(bc.prototype,{render:function(){var T=I("div");var cg=T.style;cg.overflow="visible";cg.position="absolute";cg.zIndex="0";cg.top=cg.left="0px";var ce=I("div",{"class":"BMap_mask"});var cf=ce.style;cf.position="absolute";cf.top=cf.left="0px";cf.zIndex="9";cf.overflow="hidden";cf.WebkitUserSelect="none";T.appendChild(ce);return T},_setStyle:function(ce){var T=ce.style;T.overflow="hidden";if(ax(ce).position!="absolute"){T.position="relative";T.zIndex=0}T.backgroundColor="#F5F3F0";T.color="#000";T.textAlign="left"},_bind:function(){var T=this;T._watchSize=function(){var ce=T.getSize();if(T.width!=ce.width||T.height!=ce.height){var cg=new av(T.width,T.height);var ch=new aZ("onbeforeresize");ch.size=cg;T.dispatchEvent(ch);T._updateCenterPoint((ce.width-T.width)/2,(ce.height-T.height)/2);T.maskLayer.style.width=(T.width=ce.width)+"px";T.maskLayer.style.height=(T.height=ce.height)+"px";var cf=new aZ("onresize");cf.size=ce;T.dispatchEvent(cf)}};if(T.config.enableAutoResize){T.temp.autoResizeTimer=setInterval(T._watchSize,80)}},_updateCenterPoint:function(cg,ce,ck,cj){var ch=this.getMapType().getZoomUnits(this.getZoom());var cl=this.projection;var ci=true;if(ck&&bK.isInRange(ck)){this.centerPoint=new bK(ck.lng,ck.lat);ci=false}var cf=(ck&&cj)?cl.lngLatToMercator(ck,this.currentCity):this.mercatorCenter;if(cf){this.mercatorCenter=new bK(cf.lng+cg*ch,cf.lat-ce*ch);var T=cl.mercatorToLngLat(this.mercatorCenter,this.currentCity);if(T&&ci){this.centerPoint=T}}},setZoom:function(T){if(!az(T)){return}T=this._getProperZoom(T).zoom;if(T==this.zoomLevel){return}this.lastLevel=this.zoomLevel;this.zoomLevel=T;this.dispatchEvent(new aZ("onzoomstartcode"))},panTo:function(T){if(!(T instanceof bK)){return}this.mercatorCenter=this.projection.lngLatToMercator(T,this.currentCity);if(bK.isInRange(T)){if(T){this.centerPoint=new bK(T.lng,T.lat)}else{this.centerPoint=this.projection.mercatorToLngLat(this.mercatorCenter,this.currentCity)}}},addControl:function(T){if(T&&v(T._i)){T._i(this);this.dispatchEvent(new aZ("onaddcontrol",T))}},removeControl:function(T){if(T&&v(T.remove)){T.remove();this.dispatchEvent(new aZ("onremovecontrol",T))}},addOverlay:function(T){if(T&&v(T._i)){T._i(this);this.dispatchEvent(new aZ("onaddoverlay",T))}},removeOverlay:function(T){if(T&&v(T.remove)){T.remove();this.dispatchEvent(new aZ("onremoveoverlay",T))}},clearOverlays:function(){this.dispatchEvent(new aZ("onclearoverlays"))},addTileLayer:function(T){if(T){this.dispatchEvent(new aZ("onaddtilelayer",T))}},removeTileLayer:function(T){if(T){this.dispatchEvent(new aZ("onremovetilelayer",T))}},setCenter:function(T){var cf=this;if(T instanceof bK){cf.panTo(T)}else{if(bA(T)){var ce=this._getLocal();ce.setSearchCompleteCallback(function(cg){if(ce.getStatus()==0&&ce._json.result["type"]==2){cf.setCenter(cg.getPoi(0)["point"])}});ce.search(T,{log:"center"})}}},centerAndZoom:function(T,cf,ch){a3=am.PDC.createInstance(201);a3.start_event();a3.mark("script_loaded",ay.loadScriptEnd-ay.startLoadScript);a3.mark("centerAndZoom");var ce=this;if(bA(T)){var cj=ce._getLocal();cj.setSearchCompleteCallback(function(ck){if(cj.getStatus()==0&&cj._json.result["type"]==2){var cm=ck.getPoi(0)["point"];var cl=cf||C.getBestLevel(cj._json.content["level"],ce);ce.centerAndZoom(cm,cl)}});cj.search(T,{log:"center"});return}if(!(T instanceof bK)||!cf){return}cf=ce._getProperZoom(cf).zoom;ce.lastLevel=ce.zoomLevel||cf;ce.zoomLevel=cf;ce.centerPoint=new bK(T.lng,T.lat);ce.mercatorCenter=ce.projection.lngLatToMercator(ce.centerPoint,ce.currentCity);ce.defaultZoomLevel=ce.defaultZoomLevel||ce.zoomLevel;ce.defaultCenter=ce.defaultCenter||ce.centerPoint;var ci=new aZ("onload");var cg=new aZ("onloadcode");ci.point=new bK(T.lng,T.lat);ci.pixel=ce.pointToPixel(ce.centerPoint,ce.zoomLevel);ci.zoom=cf;if(!ce.loaded){ce.loaded=true;ce.dispatchEvent(ci)}ce.dispatchEvent(cg);if(ch){ce.dispatchEvent(new aZ("onmoveend"))}else{ce.dispatchEvent(new aZ("onmoveend"));if(ce.lastLevel!=ce.zoomLevel){ce.dispatchEvent(new aZ("onzoomend"))}}},enableDragging:function(){this.config.enableDragging=true},disableDragging:function(){this.config.enableDragging=false},getSize:function(){return new av(this.container.clientWidth,this.container.clientHeight)},getCenter:function(){return this.centerPoint},getZoom:function(){return this.zoomLevel},checkResize:function(){this._watchSize()},_getProperZoom:function(cf){var ce=this.config.minZoom,T=this.config.maxZoom,cg=false;if(cf<ce){cg=true;cf=ce}if(cf>T){cg=true;cf=T}return{zoom:cf,exceeded:cg}},getContainer:function(){return this.container},pointToPixel:function(T,ce){ce=ce||this.getZoom();return this.projection.pointToPixel(T,ce,this.mercatorCenter,this.getSize(),this.currentCity)},pixelToPoint:function(T,ce){ce=ce||this.getZoom();return this.projection.pixelToPoint(T,ce,this.mercatorCenter,this.getSize(),this.currentCity)},pointToOverlayPixel:function(T,cf){if(!T){return}var cg=new bK(T.lng,T.lat);var ce=this.pointToPixel(cg,cf);ce.x-=this.offsetX;ce.y-=this.offsetY;return ce},overlayPixelToPoint:function(T,cf){if(!T){return}var ce=new a9(T.x,T.y);ce.x+=this.offsetX;ce.y+=this.offsetY;return this.pixelToPoint(ce,cf)},getBounds:function(){if(!this.isLoaded()){return new bo()}var ch=this.getSize();this.width=ch.width;this.height=ch.height;var ce=arguments[0]||{},cg=ce.margins||[0,0,0,0],T=ce.zoom||null,ci=this.pixelToPoint({x:cg[3],y:this.height-cg[2]},T),cf=this.pixelToPoint({x:this.width-cg[1],y:cg[0]},T);return new bo(ci,cf)},isLoaded:function(){return !!this.loaded},_getBestLevel:function(ce,cf){var ci=this.getMapType();var ck=cf.margins||[10,10,10,10],ch=cf.zoomFactor||0,cl=ck[1]+ck[3],cj=ck[0]+ck[2],T=ci.getMinZoom(),cn=ci.getMaxZoom();for(var cg=cn;cg>=T;cg--){var cm=this.getMapType().getZoomUnits(cg);if(ce.toSpan().lng/cm<this.width-cl&&ce.toSpan().lat/cm<this.height-cj){break}}cg+=ch;if(cg<T){cg=T}if(cg>cn){cg=cn}return cg},getViewport:function(cm,ce){var cq={center:this.getCenter(),zoom:this.getZoom()};if(!cm||!cm instanceof bo&&cm.length==0||cm instanceof bo&&cm.isEmpty()){return cq}var co=[];if(cm instanceof bo){co.push(cm.getNorthEast());co.push(cm.getSouthWest())}else{co=cm.slice(0)}ce=ce||{};var ci=[];for(var cj=0,ch=co.length;cj<ch;cj++){ci.push(this.projection.lngLatToMercator(co[cj],this.currentCity))}var cf=new bo();for(var cj=ci.length-1;cj>=0;cj--){cf.extend(ci[cj])}if(cf.isEmpty()){return cq}var T=cf.getCenter();var cp=this._getBestLevel(cf,ce);if(ce.margins){var cl=ce.margins,ck=(cl[1]-cl[3])/2,cn=(cl[0]-cl[2])/2,cg=this.getMapType().getZoomUnits(cp);T.lng=T.lng+cg*ck;T.lat=T.lat+cg*cn}T=this.projection.mercatorToLngLat(T,this.currentCity);return{center:T,zoom:cp}},setViewport:function(ce,ch){var T;if(ce&&ce.center){T=ce}else{T=this.getViewport(ce,ch)}ch=ch||{};var cf=ch.delay||200;if(T.zoom==this.zoomLevel&&ch.enableAnimation!=false){var cg=this;setTimeout(function(){cg.panTo(T.center,{duration:210})},cf)}else{this.centerAndZoom(T.center,T.zoom)}},getPanes:function(){return this._panes},getOverlays:function(){var cg=[],ch=this._overlays,cf=this._customOverlays;if(ch){for(var ce in ch){if(ch[ce] instanceof G){cg.push(ch[ce])}}}if(cf){for(var ce=0,T=cf.length;ce<T;ce++){cg.push(cf[ce])}}return cg},getMapType:function(){return this.mapType},_asyncRegister:function(){for(var T=this.temp.registerIndex;T<BMap._register.length;T++){BMap._register[T](this)}this.temp.registerIndex=T},highResolutionEnabled:function(){return this.config.enableHighResolution&&window.devicePixelRatio>1},_getLocal:function(){if(!this.temp.local){this.temp.local=new aQ(1)}return this.temp.local},_updateZoom:function(){var T=this.config;if(this.zoomLevel<T.minZoom){this.setZoom(T.minZoom)}else{if(this.zoomLevel>T.maxZoom){this.setZoom(T.maxZoom)}}var ce=new aZ("onzoomspanchange");ce.minZoom=T.minZoom;ce.maxZoom=T.maxZoom;this.dispatchEvent(ce)},getViewTiles:function(){return this._viewTiles},vectorMapEnabled:function(){if(typeof this.temp._vectorEnabled!="undefined"){return this.temp._vectorEnabled}var cf=(this.getZoom()>=this.config.vectorMapLevel)&&this.getZoom()<=this.config.maxZoom;var T=false;try{document.createElement("canvas").getContext("2d");T=true}catch(ce){T=false}this.temp._vectorEnabled=cf&&T;return this.temp._vectorEnabled}});window.BMAP_CANVAS_DRAWER=3;function bu(ci,ch){if(!ci){return}ch=ch||{};var cg="";for(var ce in ch){cg=cg+"&"+ce+"="+encodeURIComponent(ch[ce])}var cj=function(ck){if(!ck){return}bu._sending=true;setTimeout(function(){bu._img.src="http://api.map.baidu.com/images/blank.gif?"+ck.src},50)};var T=function(){var ck=bu._reqQueue.shift();if(ck){cj(ck)}};var cf=(Math.random()*100000000).toFixed(0);if(bu._sending){bu._reqQueue.push({src:"product=jsapi_mobile&v="+BMap.version+"&t="+cf+"&code="+ci+cg})}else{cj({src:"product=jsapi_mobile&v="+BMap.version+"&t="+cf+"&code="+ci+cg})}if(!bu._binded){aT.on(bu._img,"load",function(){bu._sending=false;T()});aT.on(bu._img,"error",function(){bu._sending=false;T()});bu._binded=true}}bu._reqQueue=[];bu._img=new Image();bu(6000);(function(){window.asyncMdlVer={control:"0ckezq",map:"a5to30",marker:"l0mzvd",opmb:"hjpkh4",oppc:"vg24os",poly:"lvbu2m",tile:"qe4fqg",local:"m4vupy",scommon:"x0arbd",infowindow:"xyqltk",othersearch:"tggek3",zoomcontrol:"vlzvzo",routesearch:"34kjkg",feature:"$feature$",copyrightctrl:"ik253b"};window.chkVersion=function(T){try{var ce=window.localStorage;if(!ce){return false}return ce[T]&&ce[T].length>0}catch(cf){return false}};window.saveVersion=function(T,cj,ch){try{var cf=window.localStorage;if(cf){for(var ce=cf.length,cg=ce-1;cg>=0;cg--){var ck=cf.key(cg);if(ck.indexOf(ch)>-1){cf.removeItem(ck)}}cf.setItem(T,cj)}}catch(ci){}};window.getVersion=function(T){try{var ce=window.localStorage;if(!ce){return""}return ce.getItem(T)}catch(cf){return""}}})();function g(cg){var T={duration:1000,fps:30,delay:0,transition:aj.linear,onStop:function(){}};this._anis=[];if(cg){for(var ce in cg){T[ce]=cg[ce]}}this._opts=T;if(az(T.delay)){var cf=this;setTimeout(function(){cf.start()},T.delay)}else{if(T.delay!=g.INFINITE){this.start()}}}g.INFINITE="INFINITE";g.prototype.start=function(){this._beginTime=ar();this._endTime=this._beginTime+this._opts.duration;this._launch()};g.prototype.add=function(T){this._anis.push(T)};g.prototype._launch=function(){var cf=this;var T=ar();if(T>=cf._endTime){if(v(cf._opts.render)){cf._opts.render(cf._opts.transition(1))}if(v(cf._opts.finish)){cf._opts.finish()}if(cf._anis.length>0){var ce=cf._anis[0];ce._anis=[].concat(cf._anis.slice(1));ce.start()}return}cf.schedule=cf._opts.transition((T-cf._beginTime)/cf._opts.duration);if(v(cf._opts.render)){cf._opts.render(cf.schedule)}if(!cf.terminative){cf._timer=setTimeout(function(){cf._launch()},1000/cf._opts.fps)}};g.prototype.stop=function(ce){this.terminative=true;for(var T=0;T<this._anis.length;T++){this._anis[T].stop();this._anis[T]=null}this._anis.length=0;if(this._timer){clearTimeout(this._timer);this._timer=null}this._opts.onStop(this.schedule);if(ce){this._endTime=this._beginTime;this._launch()}};g.prototype.cancel=function(){if(this._timer){clearTimeout(this._timer)}this._endTime=this._beginTime;this.schedule=0};g.prototype.setFinishCallback=function(T){if(this._anis.length>0){this._anis[this._anis.length-1]._opts.finish=T}else{this._opts.finish=T}};var aj={linear:function(T){return T},reverse:function(T){return 1-T},easeInQuad:function(T){return T*T},easeInCubic:function(T){return Math.pow(T,3)},easeOutQuad:function(T){return -(T*(T-2))},easeOutCubic:function(T){return Math.pow((T-1),3)+1},easeInOutQuad:function(T){if(T<0.5){return T*T*2}else{return -2*(T-2)*T-1}return},easeInOutCubic:function(T){if(T<0.5){return Math.pow(T,3)*4}else{return Math.pow(T-1,3)*4+1}},easeInOutSine:function(T){return(1-Math.cos(Math.PI*T))/2}};aj["ease-in"]=aj.easeInQuad;aj["ease-out"]=aj.easeOutQuad;var bJ={imgPath:"http://map.baidu.com/res_mobile2/images/",imgPathI:"http://api0.map.bdimg.com/images/",fontFamily:"arial,sans-serif"};function bl(cf,T){var ce=cf.style;ce.left=T[0]+"px";ce.top=T[1]+"px"}function b1(T){T.style.MozUserSelect="none"}function q(T){return T&&T.parentNode&&T.parentNode.nodeType!=11}function af(ce,T){aT.dom.insertHTML(ce,"beforeEnd",T);return ce.lastChild}function bw(T){var ce={left:0,top:0};while(T&&T.offsetParent){ce.left+=T.offsetLeft;ce.top+=T.offsetTop;T=T.offsetParent}return ce}function aD(T){var T=window.event||T;T.stopPropagation?T.stopPropagation():T.cancelBubble=true}function b5(T){var T=window.event||T;T.preventDefault?T.preventDefault():T.returnValue=false;return false}function bQ(T){aD(T);return b5(T)}function b8(){var T=document.documentElement,ce=document.body;if(T&&(T.scrollTop||T.scrollLeft)){return[T.scrollTop,T.scrollLeft]}else{if(ce){return[ce.scrollTop,ce.scrollLeft]}else{return[0,0]}}}function bX(ce,T){if(!ce||!T){return}return Math.round(Math.sqrt(Math.pow(ce.x-T.x,2)+Math.pow(ce.y-T.y,2)))}function y(T,cf){var ce=[];cf=cf||function(ch){return ch};for(var cg in T){ce.push(cg+"="+cf(T[cg]))}return ce.join("&")}function I(ce,T,cf){var cg=document.createElement(ce);if(cf){cg=document.createElementNS(cf,ce)}return aT.dom.setAttrs(cg,T||{})}function ax(T){if(T.currentStyle){return T.currentStyle}else{if(T.ownerDocument&&T.ownerDocument.defaultView){return T.ownerDocument.defaultView.getComputedStyle(T,null)}}}function v(T){return typeof T=="function"}function az(T){return typeof T=="number"}function bA(T){return typeof T=="string"}function bM(T){return typeof T!="undefined"}function cb(T){return typeof T=="object"}function aL(T){return"[object Array]"==Object.prototype.toString.call(T)}function a7(){if(typeof a7.result!="boolean"){a7.result=!!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Shape","1.1")}return a7.result}function O(T){return T*Math.PI/180}var aZ=aT.lang.Event;function an(){return !!(aT.platform.isIphone||aT.platform.isIpad||aT.platform.isAndroid)}function ar(){return(new Date).getTime()}var am;(function(){function ck(cp,cq,cr){if(cp.length===+cp.length){for(var cm=0,co=cp.length;cm<co;cm++){if(cq.call(cr,cm,cp[cm],cp)===false){return}}}else{for(var cn in cp){if(cp.hasOwnProperty(cn)){if(cq.call(cr,cn,cp[cn],cp)===false){return}}}}}var cf=[];var T={push:function(cm){cf.push(cm);if(window.localStorage&&window.JSON){try{localStorage.setItem("WPO_NR",JSON.stringify(cf))}catch(cn){}}},get:function(co){var cn=[];if(window.localStorage){try{co&&localStorage.removeItem("WPO_NR")}catch(cm){}}cn=cf;if(co){cf=[]}return cn}};var cj,cg={},ce={},cl={PDC:{init:function(cm){var cn=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{type:0};cg={p:cm.product_id,is_sample:Math.random()<=(cm.sample||0.01),max:cm.max||5,mnt:cm.mnt||cn.type};ce={p:cm.product_id,mnt:cg.mnt,b:50};if(window.localStorage&&window.JSON&&window.addEventListener){cj=T.get(true);window.addEventListener("load",function(){ch.send(cj)},false)}},createInstance:function(cm){return new ci(cm)}}};if((!window.localStorage||!window.JSON)&&document.attachEvent){window.attachEvent("onbeforeunload",function(){ch.send()})}var ch={send:function(co){var cm=[],cn=[],cq=co||T.get(true),cr;if(cq.length>0){ck(cq,function(cu,cs){var ct=[];ck(cs.timing,function(cx,cw){ct.push('"'+cx+'":'+cw)});cm.push('{"t":{'+ct.join(",")+'},"a":'+cs.appId+"}");if(!cr&&co&&cs.start){cr=cs.start}});ck(ce,function(ct,cs){cn.push(ct+"="+cs)});cn.push("d=["+cm.join(",")+"]");if(cr){cn.push("_st="+cr)}else{cn.push("_t="+(+new Date))}var cp=new Image();cp.src="http://static.tieba.baidu.com/tb/pms/img/st.gif?"+cn.join("&");window["___pms_img_"+new Date()*1]=cp}}};var ci=function(cm){this.appId=cm;this.timing={};this.start=+new Date};ci.prototype={mark:function(cn,cm){if(cm>=0){this.timing[cn]=cm}else{this.timing[cn]=(new Date-this.start)}},start_event:function(){this.start=+new Date},start_send:function(){this.mark("sts")},transfer_time:function(){this.mark("tt")},view_time:function(){this.mark("vt")},ready:function(){if(cg.is_sample){T.push(this);if(T.get().length>=cg.max){ch.send()}}},error:function(cm){}};am=cl})();am.PDC.init({product_id:18,sample:0.1,max:1});var b2={request:function(cg,T){if(T){var cf=(Math.random()*100000).toFixed(0);BMap._rd["_cbk"+cf]=function(ch){delete BMap._rd["_cbk"+cf];T&&T(ch)};cg+="&callback=BMap._rd._cbk"+cf}var ce=I("script",{src:cg,type:"text/javascript",charset:"utf-8"});if(ce.addEventListener){ce.addEventListener("load",function(ci){var ch=ci.target;ch.parentNode.removeChild(ch)},false)}else{if(ce.attachEvent){ce.attachEvent("onreadystatechange",function(ci){var ch=window.event.srcElement;if(ch&&(ch.readyState=="loaded"||ch.readyState=="complete")){ch.parentNode.removeChild(ch)}})}}document.getElementsByTagName("head")[0].appendChild(ce);ce=null}};window.sendReqNo=0;function b3(){}aT.object.extend(b3,{Request:{INITIAL:-1,WAITING:0,COMPLETED:1},getDependency:function(){return{poly:["marker"],scommon:[],local:["scommon"],infowindow:["marker"]}},Config:{_baseUrl:"http://api0.map.bdimg.com/getmodules?type=quick&"},delayFlag:false,ModuleTree:{_modules:{},_arrMdls:[],_tempMdls:[]},load:function(ce,ch,cf){var T=this.getModule(ce);if(T._status==this.Request.COMPLETED){if(cf){ch()}return}else{if(T._status==this.Request.INITIAL){this.combine(ce);this.pushUniqueMdl(ce);var cg=this;if(cg.delayFlag==false){cg.delayFlag=true;window.setTimeout(function(){var ci=cg.ModuleTree._arrMdls.slice(0);var cp=[];for(var co=0,ck=ci.length;co<ck;co++){var cm=ci[co],cl=window.asyncMdlVer[cm],cj="async_"+cm+"_"+cl;if(!window.chkVersion(cj)){mdlCode="";cp.push(cm+"_"+cl)}else{mdlCode=window.getVersion(cj)}cg.ModuleTree._tempMdls.push({mdlName:cm,mdlCode:mdlCode})}if(cp.length==0){cg.evalAllCode()}else{var cn=cg.Config._baseUrl+"mod="+cp.join(",");b2.request(cn)}cg.delayFlag=false;cg.ModuleTree._arrMdls.length=0},1)}T._status=this.Request.WAITING}T._callbacks.push(ch)}},combine:function(T){var cf=this.getDependency();if(T&&cf[T]){var cf=cf[T];for(var ce=0;ce<cf.length;ce++){this.combine(cf[ce]);if(!this.ModuleTree._modules[cf[ce]]){this.pushUniqueMdl(cf[ce])}}}},pushUniqueMdl:function(cg){var T=this.ModuleTree._arrMdls;for(var cf=0,ce=T.length;cf<ce;cf++){if(T[cf]==cg){return}}T.push(cg)},getModule:function(ce){var T;if(!this.ModuleTree._modules[ce]){this.ModuleTree._modules[ce]={};this.ModuleTree._modules[ce]._status=this.Request.INITIAL;this.ModuleTree._modules[ce]._callbacks=[]}T=this.ModuleTree._modules[ce];return T},run:function(cg,cj){var ce="async_"+cg+"_"+window.asyncMdlVer[cg],ci="async_"+cg;if(!window.chkVersion(ce)){window.saveVersion(ce,cj,ci)}var cf=this.getModule(cg);try{eval(cj)}catch(ck){return}cf._status=this.Request.COMPLETED;for(var ch=0,T=cf._callbacks.length;ch<T;ch++){cf._callbacks[ch]()}cf._callbacks.length=0},checkCodesStatus:function(ce,ch){var T=this.ModuleTree._tempMdls;var cg=true;for(var ci=0,cf=T.length;ci<cf;ci++){if(T[ci].mdlCode==""){if(T[ci].mdlName==ce){T[ci].mdlCode=ch}else{cg=false}}}if(cg){this.evalAllCode()}},evalAllCode:function(){var T=this.ModuleTree._tempMdls;for(var cf=0,ce=T.length;cf<ce;cf++){this.run(T[cf].mdlName,T[cf].mdlCode)}this.ModuleTree._tempMdls.length=0}});window._jsload=function(T,ce){b3.checkCodesStatus(T,ce)};function a9(T,ce){this.x=T||0;this.y=ce||0}a9.prototype.equals=function(T){return T&&T.x==this.x&&T.y==this.y};function av(ce,T){this.width=ce||0;this.height=T||0}av.prototype.equals=function(T){return T&&this.width==T.width&&this.height==T.height};function ai(cf,ce,T){this.id=cf;this.bounds=ce;this.content=T}function bR(){this._map=null;this._container;this._type="control";this._visible=true}aT.lang.inherits(bR,aT.lang.Class,"Control");aT.extend(bR.prototype,{initialize:function(T){this._map=T;if(this._container){T.container.appendChild(this._container);return this._container}return},_i:function(T){if(!this._container&&this.initialize&&v(this.initialize)){this._container=this.initialize(T)}this._opts=this._opts||{};this._setStyle();this._setPosition();if(this._container){this._container._jsobj=this}},_setStyle:function(){var ce=this._container;if(ce){var T=ce.style;T.position="absolute";T.zIndex=this._container.style.zIndex||"10";T.MozUserSelect="none";T.WebkitTextSizeAdjust="none"}},remove:function(){this._map=null;if(!this._container){return}this._container.parentNode&&this._container.parentNode.removeChild(this._container);this._container._jsobj=null;this._container=null},_render:function(){this._container=af(this._map.container,"<div unselectable='on'></div>");if(this._visible==false){aT.dom.hide(this._container)}return this._container},_setPosition:function(){this.setAnchor(this._opts.anchor)},setAnchor:function(cg){if(this.anchorFixed||!az(cg)||isNaN(cg)||cg<BMAP_ANCHOR_TOP_LEFT||cg>BMAP_ANCHOR_BOTTOM_RIGHT){cg=this.defaultAnchor}this._opts=this._opts||{};this._opts.offset=this._opts.offset||this.defaultOffset;var cf=this._opts.anchor;this._opts.anchor=cg;if(!this._container){return}var ci=this._container;var T=this._opts.offset.width;var ch=this._opts.offset.height;if(this instanceof bn){if(this._map&&this._map.highResolutionEnabled()){ci.childNodes[1].style.height="2px";ci.childNodes[2].style.height="4px";ci.childNodes[3].style.height="4px";ci.style.height="19px"}}ci.style.left=ci.style.top=ci.style.right=ci.style.bottom="auto";switch(cg){case BMAP_ANCHOR_TOP_LEFT:ci.style.top=ch+"px";ci.style.left=T+"px";break;case BMAP_ANCHOR_TOP_RIGHT:ci.style.top=ch+"px";ci.style.right=T+"px";break;case BMAP_ANCHOR_BOTTOM_LEFT:ci.style.bottom=ch+"px";ci.style.left=T+"px";break;case BMAP_ANCHOR_BOTTOM_RIGHT:ci.style.bottom=ch+"px";ci.style.right=T+"px";break;default:break}var ce=["TL","TR","BL","BR"];aT.dom.removeClass(this._container,"anchor"+ce[cf]);aT.dom.addClass(this._container,"anchor"+ce[cg])},getAnchor:function(){return this._opts.anchor},setOffset:function(T){if(!(T instanceof av)){return}this._opts=this._opts||{};this._opts.offset=new av(T.width,T.height);if(!this._container){return}this.setAnchor(this._opts.anchor)},getOffset:function(){return this._opts.offset},getDom:function(){return this._container},show:function(){if(this._visible==true){return}this._visible=true;if(this._container){aT.dom.show(this._container)}},hide:function(){if(this._visible==false){return}this._visible=false;if(this._container){aT.dom.hide(this._container)}},isVisible:function(){if(!this._container&&!this._map){return false}return !!this._visible}});window.BMAP_ANCHOR_TOP_LEFT=0;window.BMAP_ANCHOR_TOP_RIGHT=1;window.BMAP_ANCHOR_BOTTOM_LEFT=2;window.BMAP_ANCHOR_BOTTOM_RIGHT=3;function bn(T){bR.call(this);T=T||{};this._opts={};this._opts=aT.object.extend(aT.object.extend(this._opts,{color:"black",unit:"metric"}),T);this.defaultAnchor=BMAP_ANCHOR_BOTTOM_LEFT;this.defaultOffset=new av(81,18);this.setAnchor(T.anchor);this._units={metric:{name:"metric",conv:1,incon:1000,u1:"\u7c73",u2:"\u516c\u91cc"}};if(!this._units[this._opts.unit]){this._opts.unit="metric"}this._scaleText=null;this._numberArray={};this._asyncLoadCode()}window.BMAP_UNIT_METRIC="metric";aT.lang.inherits(bn,bR,"ScaleControl");aT.object.extend(bn.prototype,{initialize:function(T){this._map=T;return this._container},_asyncLoadCode:function(){var T=this;b3.load("control",function(){T._asyncDraw()})}});function bP(T){this.defaultAnchor=BMAP_ANCHOR_BOTTOM_RIGHT;this.defaultOffset=new BMap.Size(8,70);this._asyncLoadCode()}aT.lang.inherits(bP,bR,"ZoomControl");aT.object.extend(bP.prototype,{initialize:function(T){this._map=T;return this._container},_asyncLoadCode:function(){var T=this;b3.load("zoomcontrol",function(){T._asyncDraw()})}});function W(T){bR.call(this);T=T||{};this._opts={printable:false,anchor:T.anchor,offset:T.offset};this._copyrightCollection=[];this["defaultAnchor"]=BMAP_ANCHOR_BOTTOM_LEFT;this["defaultOffset"]=new av(5,2);this.setAnchor(T.anchor);this._canShow=true;this.blockInfoWindow=false;this._asyncLoadCode()}aT.lang.inherits(W,bR,"CopyrightControl");aT.object.extend(W.prototype,{initialize:function(T){this._map=T;return this._container},addCopyright:function(cf){if(!cf||!az(cf.id)||isNaN(cf.id)){return}var T={bounds:null,content:""};for(var ce in cf){T[ce]=cf[ce]}var cg=this.getCopyright(cf.id);if(cg){for(var ch in T){cg[ch]=T[ch]}}else{this._copyrightCollection.push(T)}},getCopyright:function(cf){for(var ce=0,T=this._copyrightCollection.length;ce<T;ce++){if(this._copyrightCollection[ce]["id"]==cf){return this._copyrightCollection[ce]}}},getCopyrightCollection:function(){return this._copyrightCollection},removeCopyright:function(cf){for(var ce=0,T=this._copyrightCollection.length;ce<T;ce++){if(this._copyrightCollection[ce]["id"]==cf){r=this._copyrightCollection.splice(ce,1);ce--;T=this._copyrightCollection.length}}},_asyncLoadCode:function(){var T=this;b3.load("copyrightctrl",function(){T._asyncLoad()})}});function bo(T,ce){if(T&&!ce){ce=T}this._sw=this._ne=null;this._swLng=this._swLat=null;this._neLng=this._neLat=null;if(T){this._sw=new bK(T.lng,T.lat);this._ne=new bK(ce.lng,ce.lat);this._swLng=T.lng;this._swLat=T.lat;this._neLng=ce.lng;this._neLat=ce.lat}}aT.object.extend(bo.prototype,{isEmpty:function(){return !this._sw||!this._ne},equals:function(T){if(!(T instanceof bo)||this.isEmpty()){return false}return this.getSouthWest().equals(T.getSouthWest())&&this.getNorthEast().equals(T.getNorthEast())},getSouthWest:function(){return this._sw},getNorthEast:function(){return this._ne},getCenter:function(){if(this.isEmpty()){return null}return new bK((this._swLng+this._neLng)/2,(this._swLat+this._neLat)/2)},extend:function(T){if(!(T instanceof bK)){return}var ce=T.lng,cf=T.lat;if(!this._sw){this._sw=new bK(0,0)}if(!this._ne){this._ne=new bK(0,0)}if(!this._swLng||this._swLng>ce){this._sw.lng=this._swLng=ce}if(!this._neLng||this._neLng<ce){this._ne.lng=this._neLng=ce}if(!this._swLat||this._swLat>cf){this._sw.lat=this._swLat=cf}if(!this._neLat||this._neLat<cf){this._ne.lat=this._neLat=cf}},toSpan:function(){if(this.isEmpty()){return new bK(0,0)}return new bK(Math.abs(this._neLng-this._swLng),Math.abs(this._neLat-this._swLat))}});function bK(T,ce){this.lng=parseFloat(T);this.lat=parseFloat(ce)}bK.prototype.equals=function(T){return T&&this.lat==T.lat&&this.lng==T.lng};function aY(){}aY.prototype.lngLatToPoint=function(){throw"lngLatToPoint\u65b9\u6cd5\u672a\u5b9e\u73b0"};aY.prototype.pointToLngLat=function(){throw"pointToLngLat\u65b9\u6cd5\u672a\u5b9e\u73b0"};function aV(T){this._mapType=T}aV.prototype=new aY();aT.extend(aV,{EARTHRADIUS:6370996.81,MCBAND:[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],LLBAND:[75,60,45,30,15,0],MC2LL:[[1.410526172116255e-8,0.00000898305509648872,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-0.03801003308653,17337981.2],[-7.435856389565537e-9,0.000008983055097726239,-0.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,0.00000898305509983578,0.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,0.32710905363475,6856817.37],[-1.981981304930552e-8,0.000008983055099779535,0.03278182852591,40.31678527705744,0.65659298677277,-4.44255534477492,0.85341911805263,0.12923347998204,-0.04625736007561,4482777.06],[3.09191371068437e-9,0.000008983055096812155,0.00006995724062,23.10934304144901,-0.00023663490511,-0.6321817810242,-0.00663494467273,0.03430082397953,-0.00466043876332,2555164.4],[2.890871144776878e-9,0.000008983055095805407,-3.068298e-8,7.47137025468032,-0.00000353937994,-0.02145144861037,-0.00001234426596,0.00010322952773,-0.00000323890364,826088.5]],LL2MC:[[-0.0015702102444,111320.7020616939,1704480524535203,-10338987376042340,26112667856603880,-35149669176653700,26595700718403920,-10725012454188240,1800819912950474,82.5],[0.0008277824516172526,111320.7020463578,647795574.6671607,-4082003173.641316,10774905663.51142,-15171875531.51559,12053065338.62167,-5124939663.577472,913311935.9512032,67.5],[0.00337398766765,111320.7020202162,4481351.045890365,-23393751.19931662,79682215.47186455,-115964993.2797253,97236711.15602145,-43661946.33752821,8477230.501135234,52.5],[0.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-0.0003441963504368392,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-0.0003218135878613132,111320.7020701615,0.00369383431289,823725.6402795718,0.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,0.37238884252424,7.45]],getDistanceByLL:function(ci,cg){if(!ci||!cg){return 0}ci.lng=this.getLoop(ci.lng,-180,180);ci.lat=this.getRange(ci.lat,-74,74);cg.lng=this.getLoop(cg.lng,-180,180);cg.lat=this.getRange(cg.lat,-74,74);var ce,T,ch,cf;ce=this.toRadians(ci.lng);ch=this.toRadians(ci.lat);T=this.toRadians(cg.lng);cf=this.toRadians(cg.lat);return this.getDistance(ce,T,ch,cf)},convertMC2LL:function(ce){var cf,ch;cf=new bK(Math.abs(ce.lng),Math.abs(ce.lat));for(var cg=0;cg<this.MCBAND.length;cg++){if(cf.lat>=this.MCBAND[cg]){ch=this.MC2LL[cg];break}}var T=this.convertor(ce,ch);var ce=new bK(T.lng.toFixed(6),T.lat.toFixed(6));return ce},convertLL2MC:function(T){var ce,cg;T.lng=this.getLoop(T.lng,-180,180);T.lat=this.getRange(T.lat,-74,74);ce=new bK(T.lng,T.lat);for(var cf=0;cf<this.LLBAND.length;cf++){if(ce.lat>=this.LLBAND[cf]){cg=this.LL2MC[cf];break}}if(!cg){for(var cf=this.LLBAND.length-1;cf>=0;cf--){if(ce.lat<=-this.LLBAND[cf]){cg=this.LL2MC[cf];break}}}var ch=this.convertor(T,cg);var T=new bK(ch.lng.toFixed(2),ch.lat.toFixed(2));return T},convertor:function(cf,cg){if(!cf||!cg){return}var T=cg[0]+cg[1]*Math.abs(cf.lng);var ce=Math.abs(cf.lat)/cg[9];var ch=cg[2]+cg[3]*ce+cg[4]*ce*ce+cg[5]*ce*ce*ce+cg[6]*ce*ce*ce*ce+cg[7]*ce*ce*ce*ce*ce+cg[8]*ce*ce*ce*ce*ce*ce;T*=(cf.lng<0?-1:1);ch*=(cf.lat<0?-1:1);return new bK(T,ch)},getRange:function(cf,ce,T){if(ce!=null){cf=Math.max(cf,ce)}if(T!=null){cf=Math.min(cf,T)}return cf},getLoop:function(cf,ce,T){while(cf>T){cf-=T-ce}while(cf<ce){cf+=T-ce}return cf},toRadians:function(T){return Math.PI*T/180},getDistance:function(ce,T,cg,cf){return this.EARTHRADIUS*Math.acos((Math.sin(cg)*Math.sin(cf)+Math.cos(cg)*Math.cos(cf)*Math.cos(T-ce)))}});aT.extend(aV.prototype,{lngLatToMercator:function(T){return aV.convertLL2MC(T)},mercatorToLngLat:function(T){return aV.convertMC2LL(T)},pointToLngLat:function(T){var ce=new bK(T.x,T.y);return aV.convertMC2LL(ce)},pointToPixel:function(ce,ci,ch,cg,cj){if(!ce){return}ce=this.lngLatToMercator(ce,cj);var cf=this._mapType.getZoomUnits(ci);var T=Math.round((ce.lng-ch.lng)/cf+cg.width/2);var ck=Math.round((ch.lat-ce.lat)/cf+cg.height/2);return new a9(T,ck)},pixelToPoint:function(T,cl,ch,cf,ce){if(!T){return}var ck=this._mapType.getZoomUnits(cl);var ci=ch.lng+ck*(T.x-cf.width/2);var cg=ch.lat-ck*(T.y-cf.height/2);var cj=new bK(ci,cg);return this.mercatorToLngLat(cj,ce)}});function bj(){this._type="overlay"}aT.lang.inherits(bj,aT.lang.Class,"Overlay");bj.getZIndex=function(T){T=T*1;if(!T){return 0}return(T*-100000)<<1};aT.extend(bj.prototype,{_i:function(T){if(!this.domElement&&v(this.initialize)){this.domElement=this.initialize(T);if(this.domElement){this.domElement.style.WebkitUserSelect="none"}}this.draw()},initialize:function(T){throw"initialize\u65b9\u6cd5\u672a\u5b9e\u73b0"},draw:function(){throw"draw\u65b9\u6cd5\u672a\u5b9e\u73b0"},remove:function(){if(this.domElement&&this.domElement.parentNode){this.domElement.parentNode.removeChild(this.domElement)}this.domElement=null},hide:function(){if(this.domElement){aT.dom.hide(this.domElement)}},show:function(){if(this.domElement){aT.dom.show(this.domElement)}},isVisible:function(){if(!this.domElement){return false}if(this.domElement.style.display=="none"||this.domElement.style.visibility=="hidden"){return false}return true}});BMap.register(function(cf){var T=cf.temp;T.overlayDiv=cf.overlayDiv=ce(cf.platform,200);cf._panes.floatPane=ce(T.overlayDiv,800);cf._panes.markerMouseTarget=ce(T.overlayDiv,700);cf._panes.floatShadow=ce(T.overlayDiv,600);cf._panes.labelPane=ce(T.overlayDiv,500);cf._panes.markerPane=ce(T.overlayDiv,400);cf._panes.markerShadow=ce(T.overlayDiv,300);cf._panes.mapPane=ce(T.overlayDiv,200);function ce(cg,cj){var ci=I("div"),ch=ci.style;ch.position="absolute";ch.top=ch.left=ch.width=ch.height="0";ch.zIndex=cj;cg.appendChild(ci);return ci}});function G(){aT.lang.Class.call(this);bj.call(this);this.map=null;this._visible=true;this._dblclickTime=0}aT.lang.inherits(G,bj,"OverlayInternal");aT.extend(G.prototype,{initialize:function(T){this.map=T;aT.lang.Class.call(this,this.guid);return null},draw:function(){},remove:function(){this.map=null;aT.lang.decontrol(this.guid);bj.prototype.remove.call(this)},hide:function(){if(this._visible==false){return}this._visible=false},show:function(){if(this._visible==true){return}this._visible=true},isVisible:function(){if(!this.domElement){return false}return !!this._visible},getContainer:function(){return this.domElement},setConfig:function(ce){ce=ce||{};for(var T in ce){this._config[T]=ce[T]}},setZIndex:function(T){this.zIndex=T},});function bW(){this.map=null;this._overlays={};this._customOverlays=[]}BMap.register(function(ce){var T=new bW();T.map=ce;ce._overlays=T._overlays;ce._customOverlays=T._customOverlays;ce.addEventListener("load",function(cf){T.draw(cf)});ce.addEventListener("moveend",function(cf){T.draw(cf)});ce.addEventListener("zoomend",function(cf){T.draw(cf)});ce.addEventListener("addoverlay",function(cj){var cg=cj.target;if(cg instanceof G){if(!T._overlays[cg.guid]){T._overlays[cg.guid]=cg}}else{var ci=false;for(var ch=0,cf=T._customOverlays.length;ch<cf;ch++){if(T._customOverlays[ch]===cg){ci=true;break}}if(!ci){T._customOverlays.push(cg)}}});ce.addEventListener("removeoverlay",function(ci){var cg=ci.target;if(cg instanceof G){delete T._overlays[cg.guid]}else{for(var ch=0,cf=T._customOverlays.length;ch<cf;ch++){if(T._customOverlays[ch]===cg){T._customOverlays.splice(ch,1);break}}}});ce.addEventListener("clearoverlays",function(ci){for(var ch in T._overlays){if(T._overlays[ch]._config.enableMassClear){T._overlays[ch].remove();delete T._overlays[ch]}}for(var cg=0,cf=T._customOverlays.length;cg<cf;cg++){if(T._customOverlays[cg].enableMassClear!=false){T._customOverlays[cg].remove();T._customOverlays[cg]=null;T._customOverlays.splice(cg,1);cg--;cf--}}})});bW.prototype.draw=function(cf){if(BMap.DrawerSelector){var T=BMap.DrawerSelector.getDrawer(this.map);if(T._type=="canvas"&&T.canvas){T._clearCanvas(T.canvas.getContext("2d"))}}for(var ce in this._overlays){this._overlays[ce].draw()}aT.array.each(this._customOverlays,function(cg){cg.draw()});if(this.map.temp.infoWin){try{this.map.temp.infoWin.setPosition()}catch(cf){}}if(BMap.DrawerSelector){var T=BMap.DrawerSelector.getDrawer(this.map);T.setPalette()}};function b7(T){G.call(this);this._config={strokeColor:"#3a6bdb",strokeWeight:5,strokeOpacity:0.65,strokeStyle:"solid",enableMassClear:true,getParseTolerance:null,getParseCacheIndex:null,enableParse:true};T=T||{};this.setConfig(T);if(this._config.strokeWeight<=0){this._config.strokeWeight=5}if(this._config.strokeOpacity<0||this._config.strokeOpacity>1){this._config.strokeOpacity=0.65}if(this._config.strokeStyle!="solid"&&this._config.strokeStyle!="dashed"){this._config.strokeStyle="solid"}this.domElement=null;this._bounds=new BMap.Bounds(0,0,0,0);this._parseCache=[];this._temp={}}aT.lang.inherits(b7,G,"Graph");b7.getGraphPoints=function(ce){var T=[];if(!ce){return T}if(bA(ce)){var cf=ce.split(";");aT.array.each(cf,function(ch){var cg=ch.split(",");T.push(new bK(cg[0],cg[1]))})}if(ce.constructor==Array&&ce.length>0){T=ce}return T};b7.parseTolerance=[0.09,0.005,0.0001,0.00001];aT.extend(b7.prototype,{initialize:function(T){this.map=T;return null},draw:function(){},setPath:function(T){this._parseCache.length=0;this.points=b7.getGraphPoints(T).slice(0);this._calcBounds()},_calcBounds:function(){if(!this.points){return}var T=this;T._bounds=new bo();aT.array.each(this.points,function(ce){T._bounds.extend(ce)})},getPath:function(){return this.points},setStrokeColor:function(T){this._config.strokeColor=T},getStrokeColor:function(){return this._config.strokeColor},setStrokeWeight:function(T){if(T>0){this._config.strokeWeight=T}},getStrokeWeight:function(){return this._config.strokeWeight},setStrokeOpacity:function(T){if(!T||T>1||T<0){return}this._config.strokeOpacity=T},getStrokeOpacity:function(){return this._config.strokeOpacity},setStrokeStyle:function(T){if(T!="solid"&&T!="dashed"){return}this._config.strokeStyle=T},getStrokeStyle:function(){return this._config.strokeStyle},getBounds:function(){return this._bounds},remove:function(){G.prototype.remove.call(this);this._parseCache.length=0}});function x(ce,cf,cg){if(!ce||!cf){return}this.imageUrl=ce;this.size=cf;var T=new av(Math.floor(cf.width/2),Math.floor(cf.height/2));var ch={anchor:T,imageOffset:new av(0,0)};cg=cg||{};aT.extend(ch,cg);this.imageSize=cg.imageSize;this.anchor=ch.anchor;this.imageOffset=ch.imageOffset;this.infoWindowAnchor=cg.infoWindowAnchor||this.anchor}var bf=x.prototype;bf.setImageUrl=function(T){if(!T){return}this.imageUrl=T};bf.setSize=function(T){if(!T){return}this.size=new av(T.width,T.height)};bf.setAnchor=function(T){if(!T){return}this.anchor=new av(T.width,T.height)};bf.setImageOffset=function(T){if(!T){return}this.imageOffset=new av(T.width,T.height)};bf.toString=function(){return"Icon"};var au=bJ.imgPath+"red_marker.png";var ag=new x(au,new av(19,25),{anchor:new av(10,25)});var ae=new x(au,new av(20,11),{anchor:new av(6,11),imageOffset:new av(-19,-13)});function M(T,cf){G.call(this);cf=cf||{};this.point=T;this.map=null;this._config={offset:new av(0,0),icon:ag,shadow:ae,title:"",baseZIndex:0,clickable:true,zIndexFixed:false,isTop:false,enableMassClear:true,enableClicking:true};this.setConfig(cf);if(cf.icon&&!cf.shadow){this._config.shadow=null}this._config.clickable=true;var ce=this;b3.load("marker",function(){ce._draw()})}M.TOP_ZINDEX=bj.getZIndex(-90)+1000000;aT.lang.inherits(M,G,"Marker");aT.extend(M.prototype,{setIcon:function(T){if(T instanceof x){this._config.icon=T}},getIcon:function(){return this._config.icon},getPosition:function(){return this.point},setPosition:function(T){if(T instanceof bK){this.point=new bK(T.lng,T.lat)}},setOffset:function(T){if(T instanceof av){this._config.offset=T}},getOffset:function(){return this._config.offset}});function f(T,cf){b7.call(this,cf);this.setPath(T);var ce=this;b3.load("poly",function(){ce._draw()})}aT.lang.inherits(f,b7,"Polyline");function bB(){bj.call(this);this._content=null;this.leftIcon=null;this.rightIcon=null;this.c=null;this.isOn=false;this.cc=null}aT.lang.inherits(bB,bj,"MobileInfoWindow");function bp(cf,ce){aT.lang.Class.call(this);this.content=cf;this.map=null;ce=ce||{};this._config={width:ce.width||0,height:ce.height||0,maxWidth:ce.maxWidth||600,offset:ce.offset||new av(0,0),title:ce.title||"",maxContent:ce.maxContent||"",enableAutoPan:ce.enableAutoPan===false?false:true,enableCloseOnClick:ce.enableCloseOnClick===false?false:true,onClosing:function(){return true}};if(this._config.width!=0){if(this._config.width>730){this._config.width=730}}if(this._config.height!=0){if(this._config.height>650){this._config.height=650}}if(this._config.maxWidth!=0){if(this._config.maxWidth<220){this._config.maxWidth=220}if(this._config.maxWidth>730){this._config.maxWidth=730}}this.isWinMax=false;this.IMG_PATH=bJ.imgPathI;this.overlay=null;var T=this;b3.load("infowindow",function(){T._draw()})}aT.lang.inherits(bp,aT.lang.Class,"InfoWindow");aT.extend(bp.prototype,{setContent:function(T){this.content=T},getContent:function(){return this.content},redraw:function(){},enableAutoPan:function(){this._config.enableAutoPan=true},disableAutoPan:function(){this._config.enableAutoPan=false},enableCloseOnClick:function(){this._config.enableCloseOnClick=true},disableCloseOnClick:function(){this._config.enableCloseOnClick=false},show:function(){this._visible=true},hide:function(){this._visible=false},close:function(){this.hide()},restore:function(){this.isWinMax=false},isVisible:function(){return this.isOpen()},isOpen:function(){return false},getPosition:function(){if(this.overlay&&this.overlay.getPosition){return this.overlay.getPosition()}},getOffset:function(){return this._config.offset}});bc.prototype.openInfoWindow=function(cg,T){if(!(cg instanceof bp)||!(T instanceof bK)){return}var ce=this.temp;if(!ce.marker){var cf=new x(bJ.imgPath+"blank.gif",{width:1,height:1});ce.marker=new M(T,{icon:cf,offset:new av(0,0),clickable:false});ce.marker._fromMap=1}else{ce.marker.setPosition(T)}this.addOverlay(ce.marker);ce.marker.openInfoWindow(cg)};bc.prototype.closeInfoWindow=function(){var T=this.temp.infoWin||this.temp._infoWin;if(T&&T.overlay){T.overlay.closeInfoWindow()}};G.prototype.openInfoWindow=function(T){if(this.map){this.map.closeInfoWindow();T._visible=true;this.map.temp._infoWin=T;T.overlay=this;aT.lang.Class.call(T,T.guid)}};G.prototype.closeInfoWindow=function(){if(this.map&&this.map.temp._infoWin){this.map.temp._infoWin._visible=false;aT.lang.decontrol(this.map.temp._infoWin.guid);this.map.temp._infoWin=null}};function bq(T){this.map=T;this.mapTypeLayers=[];this.tileLayers=[];this.bufferNumber=300;this.realBufferNumber=0;this.mapTiles={};this.bufferTiles={};this.numLoading=0;this.isFirstTile=true;this.arrStatTraffic=[];this.isZooming=false;this._mapTypeLayerContainer=this._createDiv(1);this._vectorLayerContainer=this._createDiv(2);this._normalLayerContainer=this._createDiv(3);T.platform.appendChild(this._mapTypeLayerContainer);T.platform.appendChild(this._vectorLayerContainer);T.platform.appendChild(this._normalLayerContainer)}BMap.register(function(ce){var T=new bq(ce);T.initialize();ce.tileMgr=T});aT.extend(bq.prototype,{initialize:function(){var T=this,ce=T.map;ce.addEventListener("loadcode",function(){T.loadTiles()});ce.addEventListener("addtilelayer",function(cf){T.addTileLayer(cf)});ce.addEventListener("removetilelayer",function(cf){T.removeTileLayer(cf)});ce.addEventListener("zoomstartcode",function(cf){T._zoom()})},loadTiles:function(){var T=this;T.lastZoom=T.map.getZoom();if(!T.loaded){T.initMapTypeTiles()}T.moveGridTiles();if(!T.loaded){T.loaded=true;b3.load("tile",function(){T._asyncLoadCode()})}},initMapTypeTiles:function(){var ce=this.map.getMapType();var cf=ce.getTileLayers();for(var T=0;T<cf.length;T++){var cg=new i();aT.extend(cg,cf[T]);this.mapTypeLayers.push(cg);cg.initialize(this.map,this._mapTypeLayerContainer)}},_createDiv:function(ce){var T=I("div");T.style.position="absolute";T.style.left=T.style.top="0";T.style.zIndex=ce;return T},_checkTilesLoaded:function(){this.numLoading--;var T=this;if(this.isFirstTile){this.map.dispatchEvent(new aZ("onfirsttileloaded"));this.isFirstTile=false}if(this.numLoading==0){if(this._checkLoadedTimer){clearTimeout(this._checkLoadedTimer);this._checkLoadedTimer=null}this._checkLoadedTimer=setTimeout(function(){if(T.numLoading==0){T.map.dispatchEvent(new aZ("ontilesloaded"));T.isFirstTile=true}T._checkLoadedTimer=null},80)}},getTileName:function(T,ce){return"TILE-"+ce.guid+"-"+T[0]+"-"+T[1]+"-"+T[2]},hideTile:function(ce){var T=ce.img;if(T){if(q(T)){T.parentNode.removeChild(T)}}delete this.mapTiles[ce.name];if(!ce.loaded){T=null;ce._callCbks();ce.img=null;ce.mgr=null}},moveGridTiles:function(cp){this.arrStatTraffic.length=[];var cC=this.mapTypeLayers,cA=cC.concat(this.tileLayers),cx=cA.length;for(var cD=0;cD<cx;cD++){var cg=cA[cD];if(cg.baseLayer){this.tilesDiv=cg.tilesDiv;var ci=this.tilesDiv;if(this.map.vectorMapEnabled()){ci.style.display="none";continue}else{ci.style.display="block"}}if(cg._isVectorLayer){continue}var cq=this.map,cr=cq.getMapType(),cK=cr.getProjection(),cf=cq.zoomLevel,cw=cq.mercatorCenter;var cG=cr.getZoomUnits(cf),cm=cr.getZoomFactor(cf),cl=Math.ceil(cw.lng/cm),cB=Math.ceil(cw.lat/cm),co=cr.getTileSize(),cs=[cl,cB,(cw.lng-cl*cm)/cm*co,(cw.lat-cB*cm)/cm*co],cn=cs[0]-Math.ceil((cq.width/2-cs[2])/co),cM=cs[1]-Math.ceil((cq.height/2-cs[3])/co),cE=cs[0]+Math.ceil((cq.width/2+cs[2])/co),ct=cs[1]+Math.ceil((cq.height/2+cs[3])/co);var ce=this.mapTiles,T=-cw.lng/cG,cN=cw.lat/cG,cy=[Math.round(T),Math.round(cN)],cH=cq.getZoom();for(var cu in ce){var cj=ce[cu],cL=cj.info;if(cL[2]!=cH||(cL[2]==cH&&(cn>cL[0]||cE<=cL[0]||cM>cL[1]||ct<=cL[1]))){this.hideTile(cj)}}var ch=-cq.offsetX+cq.width/2,ck=-cq.offsetY+cq.height/2;cg.tilesDiv.style.left=ch+"px";cg.tilesDiv.style.top=ck+"px";if(this.tilesOrder){this.tilesOrder.length=0}else{this.tilesOrder=[]}if(cq._viewTiles){cq._viewTiles.length=0}else{cq._viewTiles=[]}for(var cJ=cn;cJ<cE;cJ++){for(var cI=cM;cI<ct;cI++){this.tilesOrder.push([cJ,cI]);cq._viewTiles.push({x:cJ,y:cI})}}this.tilesOrder.sort((function(cO){return function(cP,cQ){return((0.4*Math.abs(cP[0]-cO[0])+0.6*Math.abs(cP[1]-cO[1]))-(0.4*Math.abs(cQ[0]-cO[0])+0.6*Math.abs(cQ[1]-cO[1])))}})([cs[0]-1,cs[1]-1]));if(!this.map.enableLoadTiles){return}var cz=cg.baseLayer?true:false;if(cz){if(cp!==true){this.map.dispatchEvent(new aZ("ontilesbegin"))}this.numLoading+=this.tilesOrder.length}for(var cJ=0,cF=this.tilesOrder.length;cJ<cF;cJ++){this.showTile([this.tilesOrder[cJ][0],this.tilesOrder[cJ][1],cH],cy,cg)}}},showTile:function(ci,ch,cl){var cp=this,cn=cl.baseLayer?true:false;cp.centerPos=ch;var ck=this.map.getMapType(),cf=cp.getTileName(ci,cl),cs=ck.getTileSize(),cg=(ci[0]*cs)+ch[0],ce=(-1-ci[1])*cs+ch[1],cm=[cg,ce],co=this.mapTiles[cf];if(co&&co.img){bl(co.img,cm);if(cn){if(co.loaded){this._checkTilesLoaded()}else{co._addLoadCbk(function(){cp._checkTilesLoaded()})}}return}co=this.bufferTiles[cf];if(co&&co.img){cl.tilesDiv.insertBefore(co.img,cl.tilesDiv.lastChild);this.mapTiles[cf]=co;bl(co.img,cm);if(cn){if(co.loaded){this._checkTilesLoaded()}else{co._addLoadCbk(function(){cp._checkTilesLoaded()})}}return}var cr=cs*Math.pow(2,(ck.getMaxZoom()-ci[2])),cq=new bK(ci[0]*cr,ci[1]*cr),cj=new a9(ci[0],ci[1]),T=cl.getTilesUrl(cj,ci[2]);co=new bt(this,T,cm,ci,cl);if(cn){co._addLoadCbk(function(){cp._checkTilesLoaded()})}co._load();this.mapTiles[cf]=co},addTileLayer:function(ch){var cg=this,ce=ch.target;for(var cf=0;cf<cg.tileLayers.length;cf++){if(cg.tileLayers[cf]==ce){return}}var T=ce._isVectorLayer?this._vectorLayerContainer:this._normalLayerContainer;ce.initialize(this.map,T);cg.tileLayers.push(ce)},removeTileLayer:function(ch){var cg=this,ce=ch.target;for(var cf=0,T=cg.tileLayers.length;cf<T;cf++){if(ce==cg.tileLayers[cf]){cg.tileLayers.splice(cf,1)}}ce.remove()},_zoom:function(cf,ce){var T=this;setTimeout(function(){T.moveGridTiles();T.map.dispatchEvent(new aZ("onzoomend"))},10)}});function bt(ck,T,ch,ce,cg){this.mgr=ck;this.position=ch;this._cbks=[];this.name=ck.getTileName(ce,cg);this.info=ce;this.level=parseInt(ce[2],10);var cl=I("img");b1(cl);cl.galleryImg=false;var cj=cl.style;var cf=ck.map.getMapType(),cm=cf.getTileSize();cj.position="absolute";cj.width=cm+"px";cj.height=cm+"px";cj.left=ch[0]+"px";cj.top=ch[1]+"px";this.img=cl;this.src=T;var ci=this;this.img.onload=function(cs){ci.loaded=true;if(!ci.mgr){return}var co=ci.mgr;var cn=co.bufferTiles;if(!cn[ci.name]){co.realBufferNumber++;cn[ci.name]=ci}if(ci.img&&!q(ci.img)){if(cg.tilesDiv){cg.tilesDiv.appendChild(ci.img)}}var cq=co.realBufferNumber-co.bufferNumber;for(var cr in cn){if(cq<=0){break}if(!co.mapTiles[cr]){cn[cr].mgr=null;var cp=cn[cr].img;if(cp&&cp.parentNode){cp.parentNode.removeChild(cp)}cp=null;cn[cr].img=null;delete cn[cr];co.realBufferNumber--;cq--}}ci._callCbks()};cl=null}bt.prototype._addLoadCbk=function(T){this._cbks.push(T)};bt.prototype._load=function(){this.img.src=this.src};bt.prototype._callCbks=function(){var ce=this;for(var T=0;T<ce._cbks.length;T++){ce._cbks[T]()}ce._cbks.length=0};function i(T){this.opts=T||{};this.baseLayer=this.opts.baseLayer||false;this.zIndex=this.opts.zIndex||0;this.guid=i._guid++}i._guid=0;aT.lang.inherits(i,aT.lang.Class,"TileLayer");aT.extend(i.prototype,{initialize:function(cf,T){if(this.baseLayer){this.zIndex=-100}this.map=cf;if(!this.tilesDiv){var cg=I("div");var ce=cg.style;ce.position="absolute";ce.zIndex=this.zIndex;ce.left=Math.ceil(-cf.offsetX+cf.width/2)+"px";ce.top=Math.ceil(-cf.offsetY+cf.height/2)+"px";T.appendChild(cg);this.tilesDiv=cg}},remove:function(){if(this.tilesDiv&&this.tilesDiv.parentNode){this.tilesDiv.innerHTML="";this.tilesDiv.parentNode.removeChild(this.tilesDiv)}delete this.tilesDiv},getTilesUrl:function(ce,cf){var T="";if(this.opts.tileUrlTemplate){T=this.opts.tileUrlTemplate.replace(/\{X\}/,ce.x);T=T.replace(/\{Y\}/,ce.y);T=T.replace(/\{Z\}/,cf)}return T},getMapType:function(){return this.mapType}});function ap(T){i.call(this,T);this._opts={};T=T||{};this._opts=aT.object.extend(this._opts,T);if(this._opts.predictDate){if(this._opts.predictDate.weekday<1||this._opts.predictDate.weekday>7){this._opts.predictDate=1}if(this._opts.predictDate.hour<0||this._opts.predictDate.hour>23){this._opts.predictDate.hour=0}}this._tileUrl="http://its.map.baidu.com:8002/traffic/"}ap.prototype=new i();ap.prototype.initialize=function(ce,T){i.prototype.initialize.call(this,ce,T);this._map=ce};ap.prototype.getTilesUrl=function(cj,ce){var ck="";if(this._opts.predictDate){ck="HistoryService?day="+(this._opts.predictDate.weekday-1)+"&hour="+this._opts.predictDate.hour+"&t="+new Date().getTime()+"&"}else{ck="TrafficTileService?time="+new Date().getTime()+"&"}var cf=this._map,cl=cj.x,cg=cj.y,ci=Math.floor(cl/200),ch=Math.floor(cg/200),T=this._tileUrl+ck+"level="+ce+"&x="+cl+"&y="+cg;return T.replace(/-(\d+)/gi,"M$1")};function bZ(T,ce,cf){this._name=T;this._layers=ce instanceof i?[ce]:ce.slice(0);this._opts={tips:"",labelText:"",minZoom:1,maxZoom:18,tileSize:256,textColor:"black",errorImageUrl:"",projection:new aV(this)};if(this._layers.length==1){this._layers[0].baseLayer=true}aT.extend(this._opts,cf||{})}aT.extend(bZ.prototype,{getName:function(){return this._name},getTips:function(){return this._opts.tips},getLabelText:function(){return this._opts.labelText},getTileLayer:function(){return this._layers[0]},getTileLayers:function(){return this._layers},getTileSize:function(){this._opts.tileSize=256;var T=this._opts.mapInstance;if(T.highResolutionEnabled()&&T.getZoom()<T.config.vectorMapLevel){this._opts.tileSize=128}return this._opts.tileSize},getMinZoom:function(){return this._opts.minZoom},getMaxZoom:function(){return this._opts.maxZoom},getTextColor:function(){return this._opts.textColor},getProjection:function(){return this._opts.projection},getErrorImageUrl:function(){return this._opts.errorImageUrl},getZoomUnits:function(T){var cf=1,ce=this._opts.mapInstance;if(ce.highResolutionEnabled()&&ce.getZoom()<ce.config.vectorMapLevel){cf=2}return Math.pow(2,(18-T))*cf},getZoomFactor:function(T){return this.getZoomUnits(T)*this.getTileSize()}});var bC={pd:{host:["http://online0.map.bdimg.com/it/","http://online1.map.bdimg.com/it/","http://online2.map.bdimg.com/it/","http://online3.map.bdimg.com/it/"],params:{fm:42,f:"webapp",format_add:".jpg"}},hd:{host:["http://or1.map.baidu.com:8080/it/","http://or2.map.baidu.com:8080/it/","http://or3.map.baidu.com:8080/it/","http://or4.map.baidu.com:8080/it/"],params:{format:"jpeg",fm:41,quality:70,f:"webapp",format_add:".jpg"}}};var aJ=new i();aJ.getTilesUrl=function(ce,ck){var cl=ce.x,cg=ce.y,cf,ch;var ci=BMap.TILE_CONFIG||bC;if(this.map.highResolutionEnabled()){cf=ci.hd;if(typeof TVC!="undefined"){ch=TVC.webapp.high_normal}}else{cf=ci.pd;if(typeof TVC!="undefined"){ch=TVC.webapp.lower_normal}}var cm="u=x="+cl+";y="+cg+";z="+ck;if(ch&&ch.version){cm+=";v="+ch.version}else{cm+=";v=014"}cm+=";type=web";var T=cf.host[Math.abs(cl+cg)%cf.host.length]+cm;if(ch&&ch.updateDate){T+="&udt="+ch.updateDate}for(var cj in cf.params){T+="&"+cj+"="+cf.params[cj]}return T.replace(/-(\d+)/gi,"M$1")};var C={};window.SUtil=C;C.parseGeoExtReg1=function(T){return T.replace(/([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*),([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*)(,)/g,"$1,$2;")};C.parseGeoExtReg2=function(ce,T){var cf=new RegExp("(((-?\\d+)(\\.\\d+)?),((-?\\d+)(\\.\\d+)?);)(((-?\\d+)(\\.\\d+)?),((-?\\d+)(\\.\\d+)?);){"+T+"}","ig");return ce.replace(cf,"$1")};var aW={REQ_BASE_URL:"http://api.map.baidu.com/",request:function(cj,cg,ce,cl,cf){var ch=(Math.random()*100000).toFixed(0);BMap._rd["_cbk"+ch]=function(cm){ce=ce||{};cj&&cj(cm,ce);delete BMap._rd["_cbk"+ch]};cl=cl||"";var ck;if(ce&&ce.useEncodeURI){ck=y(cg,encodeURI)}else{ck=y(cg,encodeURIComponent)}var ci=this,T=ci.REQ_BASE_URL+cl+"?"+ck+"&ie=utf-8&oue=1&fromproduct=jsapi";if(!cf){T+="&res=api"}T+="&callback=BMap._rd._cbk"+ch;b2.request(T)}};window.SearchRequestMgr=aW;BMap._rd={};var cc=0,bG=1,aX=2,aH=3,L=4,cd=5,aF=6,b=7,U=8;var b0="cur";var c="cen";var bN="s";var A="con";var V="bd";var bI="nb";var bd="gc";var e="rgc";var D="dec";var at="bda";var R="sa";var aO="nba";var k=2;var aR=4;var a8=7;var F=11;var aB=12;var a0=14;var B=21;var bb=23;var ab=26;var bg=28;var a5=35;var be=44;var ak=45;var P=46;var bs=47;var aM=-1;var J=0;var bU=1;var aS=2;var s=3;var ca="http://map.baidu.com/";var o="http://api.map.baidu.com/";BMap.I=window.Instance=aT.lang.instance;var bY=0,aN=1,bi=2,bS=3,m=4;var u=0;var X={};window.APIPack=X;function n(ce,T){aT.lang.Class.call(this);this._loc={};this.setLocation(ce);T=T||{};T.renderOptions=T.renderOptions||{};this._opts={renderOptions:{panel:T.renderOptions.panel||null,map:T.renderOptions.map||null,autoViewport:T.renderOptions.autoViewport||true,selectFirstResult:T.renderOptions.selectFirstResult,enableDragging:T.renderOptions.enableDragging||false},onSearchComplete:T.onSearchComplete||function(){},onMarkersSet:T.onMarkersSet||function(){},onInfoHtmlSet:T.onInfoHtmlSet||function(){},onResultsHtmlSet:T.onResultsHtmlSet||function(){},reqFrom:T.reqFrom||""};if(typeof T!="undefined"&&typeof T.renderOptions!="undefined"&&typeof T.renderOptions["autoViewport"]!="undefined"){this._opts.renderOptions.autoViewport=T.renderOptions["autoViewport"]}else{this._opts.renderOptions.autoViewport=true}this._opts.renderOptions.panel=aT.G(this._opts.renderOptions.panel)}aT.inherits(n,aT.lang.Class);aT.extend(n.prototype,{getResults:function(){return this._results},setLocation:function(T){if(!T){return}this._loc.src=T},setSearchCompleteCallback:function(T){this._opts.onSearchComplete=T||function(){}},setMarkersSetCallback:function(T){this._opts.onMarkersSet=T||function(){}},setInfoHtmlSetCallback:function(T){this._opts.onInfoHtmlSet=T||function(){}},setResultsHtmlSetCallback:function(T){this._opts.onResultsHtmlSet=T||function(){}},getStatus:function(){return this._status}});var aQ=function(cf,ce){n.call(this,cf,ce);ce=ce||{};ce.renderOptions=ce.renderOptions||{};this.setPageCapacity(ce.pageCapacity);if(typeof ce.renderOptions["selectFirstResult"]!="undefined"&&!ce.renderOptions["selectFirstResult"]){this.disableFirstResultSelection()}else{this.enableFirstResultSelection()}this._overlays=[];this._arrPois=[];this._curIndex=-1;this._queryList=[];var T=this;b3.load("local",function(){T._check()},true)};aT.inherits(aQ,n,"LocalSearch");aQ.DEFAULT_PAGE_CAPACITY=10;aQ.MIN_PAGE_CAPACITY=1;aQ.MAX_PAGE_CAPACITY=100;aQ.DEFAULT_RADIUS=2000;aQ.MAX_RADIUS=100000;aT.extend(aQ.prototype,{search:function(T,ce){bu(7001,{search:"normal"});this._queryList.push({method:"search",arguments:[T,ce]})},searchInBounds:function(T,cf,ce){bu(7001,{search:"searchInBonds"});this._queryList.push({method:"searchInBounds",arguments:[T,cf,ce]})},searchNearby:function(cf,ce,T,cg){bu(7001,{search:"searchNearby"});this._queryList.push({method:"searchNearby",arguments:[cf,ce,T,cg]})},clearResults:function(){delete this._json;delete this._status;delete this._results;delete this._ud;this._curIndex=-1;this._setStatus();if(this._opts.renderOptions.panel){this._opts.renderOptions.panel.innerHTML=""}},gotoPage:function(){},enableFirstResultSelection:function(){this._opts.renderOptions.selectFirstResult=true},disableFirstResultSelection:function(){this._opts.renderOptions.selectFirstResult=false},setPageCapacity:function(T){if(typeof T=="number"&&!isNaN(T)){this._opts.pageCapacity=T<1?aQ.DEFAULT_PAGE_CAPACITY:(T>aQ.MAX_PAGE_CAPACITY?aQ.DEFAULT_PAGE_CAPACITY:T)}else{this._opts.pageCapacity=aQ.DEFAULT_PAGE_CAPACITY}},getPageCapacity:function(){return this._opts.pageCapacity},toString:function(){return"LocalSearch"}});function aK(ce){this._opts={};aT.extend(this._opts,ce);this._queryList=[];var T=this;b3.load("othersearch",function(){T._asyncSearch()})}aT.inherits(aK,aT.lang.Class,"Geocoder");aT.extend(aK.prototype,{getPoint:function(T,cf,ce){bu(7002,{geo:"getPoint"});this._queryList.push({method:"getPoint",arguments:[T,cf,ce]})},getLocation:function(T,cf,ce){bu(7002,{geo:"getLocation"});this._queryList.push({method:"getLocation",arguments:[T,cf,ce]})},toString:function(){return"Geocoder"}});function ao(T,ch,ce){aT.lang.Class.call(this);if(!T){return}this.container=(typeof(T)=="object")?T:aT.G(T);this.page=1;this.pageCount=100;this.argName="pg";this.pagecap=4;this.callback=ch;this.update=true;var cf={page:1,totalCount:100,pageCount:100,pagecap:4,argName:"pg",update:true};if(!ce){ce=cf}for(var cg in ce){if(typeof(ce[cg])!="undefined"){this[cg]=ce[cg]}}this.render()}aT.extend(ao.prototype,{render:function(){this.initialize()},initialize:function(){this.checkPages();this.container.innerHTML=this.createHtml()},checkPages:function(){if(isNaN(parseInt(this.page))){this.page=1}if(isNaN(parseInt(this.pageCount))){this.pageCount=1}if(this.page<1){this.page=1}if(this.pageCount<1){this.pageCount=1}if(this.page>this.pageCount){this.page=this.pageCount}this.page=parseInt(this.page);this.pageCount=parseInt(this.pageCount)},getPage:function(){var ce=location.search;var cf=new RegExp("[?&]?"+this.argName+"=([^&]*)[&$]?","gi");var T=ce.match(cf);this.page=RegExp.$1},createHtml:function(){var cl=[],cf=this.page-1,ci=this.page+1;cl.push('<p style="margin:0;padding:0;white-space:nowrap">');if(cf<1){}else{if(this.page>=this.pagecap){var ce='<span style="margin-right:3px"><a style="color:#7777cc" href="javascript:void(0)" onclick="{temp1}">\u9996\u9875</a></span>';cl.push(ce.replace("{temp1}","BMap.I('"+this.guid+"').toPage(1);"))}var ce='<span style="margin-right:3px"><a style="color:#7777cc" href="javascript:void(0)" onclick="{temp2}">\u4e0a\u4e00\u9875</a></span>';cl.push(ce.replace("{temp2}","BMap.I('"+this.guid+"').toPage("+cf+");"))}if(this.page<this.pagecap){if(this.page%this.pagecap==0){var cg=this.page-this.pagecap-1}else{var cg=this.page-this.page%this.pagecap+1}var cj=cg+this.pagecap-1}else{var ck=Math.floor(this.pagecap/2);var ch=this.pagecap%2-1;if(this.pageCount>this.page+ck){var cj=this.page+ck;var cg=this.page-ck-ch}else{var cj=this.pageCount;var cg=this.page-ck-ch}}if(this.page>this.pageCount-this.pagecap&&this.page>=this.pagecap){var cg=this.pageCount-this.pagecap+1;var cj=this.pageCount}for(var T=cg;T<=cj;T++){if(T>0){if(T==this.page){cl.push('<span style="margin-right:3px">'+T+"</span>")}else{if(T>=1&&T<=this.pageCount){var ce='<span><a style="color:#7777cc;margin-right:3px" href="javascript:void(0)" onclick="{temp3}">['+T+"]</a></span>";cl.push(ce.replace("{temp3}","BMap.I('"+this.guid+"').toPage("+T+");"))}}}}if(ci>this.pageCount){}else{var ce='<span><a style="color:#7777cc" href="javascript:void(0)" onclick="{temp4}">\u4e0b\u4e00\u9875</a></span>';cl.push(ce.replace("{temp4}","BMap.I('"+this.guid+"').toPage("+ci+");"))}cl.push("</p>");return cl.join("")},toPage:function(ce){var T=ce?ce:1;if(typeof(this.callback)=="function"){this.callback(T);this.page=T}if(this.update){this.render()}}});window.BMAP_MODE_DRIVING="driving";window.BMAP_MODE_TRANSIT="transit";window.BMAP_MODE_WALKING="walking";window.BMAP_MODE_NAVIGATION="navigation";var Q={web:"http://api.map.baidu.com/direction?",android:"bdapp://map/direction?",ios:"baidumap://map/direction?"},Y=navigator.userAgent,N=/ipad|iphone|ipod|iph/i.test(Y),bT=/android/i.test(Y);function br(T){this.opts=T||{}}aT.extend(br.prototype,{routeCall:function(cg,T,cf){var ce=this;b3.load("routesearch",function(){ce._asyncSearch(cg,T,cf)})}});function S(T,ce){window.BMap[T]=ce}function j(T,ce){for(var cf in ce){T[cf]=ce[cf]}}j(window,{BMAP_STATUS_SUCCESS:cc,BMAP_STATUS_CITY_LIST:bG,BMAP_STATUS_UNKNOWN_LOCATION:aX,BMAP_STATUS_UNKNOWN_ROUTE:aH,BMAP_STATUS_INVALID_KEY:L,BMAP_STATUS_INVALID_REQUEST:cd,BMAP_STATUS_PERMISSION_DENIED:aF,BMAP_STATUS_SERVICE_UNAVAILABLE:b,BMAP_STATUS_TIMEOUT:U});S("Map",bc);S("MapType",bZ);S("Point",bK);S("Pixel",a9);S("Size",av);S("Bounds",bo);S("TileLayer",i);S("TrafficLayer",ap);S("Overlay",bj);S("Marker",M);S("Icon",x);S("Polyline",f);S("MobileInfoWindow",bB);S("Control",bR);S("ScaleControl",bn);S("LocalSearch",aQ);S("InfoWindow",bp);S("Geocoder",aK);S("ZoomControl",bP);S("Page",ao);S("RouteSearch",br);S("MercatorProjection",aV);S("Copyright",ai);S("CopyrightControl",W);BMap.apiLoad();})();